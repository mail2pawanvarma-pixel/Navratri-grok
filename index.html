<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navratri Celebration</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Georgia', serif;
            color: #263238;
            background: linear-gradient(135deg, #42A5F5, #AB47BC, #26A69A);
            background-size: 400% 400%;
            animation: bgGlow 15s ease infinite;
        }

        @keyframes bgGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #landing {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(45deg, #42A5F5, #AB47BC, #26A69A);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite, zoom 5s infinite alternate;
            transition: opacity 1s ease;
            z-index: 2;
            overflow: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes zoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        #landing h1 {
            font-size: 2.5em;
            text-align: center;
            margin: 0 20px;
            text-shadow: 0 0 20px #AB47BC, 0 0 30px #42A5F5;
            font-family: 'Palatino Linotype', serif;
            color: #ECEFF1;
        }

        #reveal {
            margin-top: 20px;
            padding: 12px 25px;
            font-size: 1.3em;
            background: linear-gradient(45deg, #26A69A, #AB47BC);
            border: 3px solid #263238;
            color: #ECEFF1;
            cursor: pointer;
            box-shadow: 0 0 20px #AB47BC, 0 0 30px #26A69A;
            animation: glowPulse 2s infinite;
            border-radius: 15px;
            font-family: 'Georgia', serif;
            position: relative;
            overflow: hidden;
        }

        #reveal::before {
            content: "üå∏";
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            opacity: 0.7;
            animation: float 3s infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(-50%) translateX(0); }
            50% { transform: translateY(-50%) translateX(5px); }
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 20px #AB47BC, 0 0 30px #26A69A; }
            50% { box-shadow: 0 0 30px #AB47BC, 0 0 40px #26A69A; }
            100% { box-shadow: 0 0 20px #AB47BC, 0 0 30px #26A69A; }
        }

        #main {
            position: relative;
            width: 100vw;
            min-height: 100vh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            background: linear-gradient(to bottom, #E0F7FA, #F5F5F5);
            transition: opacity 1s ease;
            opacity: 0;
            padding: 20px;
            box-sizing: border-box;
            z-index: 1;
        }

        #happy-navratri {
            font-size: 2.5em;
            margin: 20px 0 15px;
            text-shadow: 0 0 20px #AB47BC, 0 0 30px #42A5F5;
            background: linear-gradient(to right, #42A5F5, #AB47BC, #26A69A);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bgmove 5s linear infinite, discoGlow 2s infinite, blink 1s infinite alternate;
            font-family: 'Palatino Linotype', serif;
            text-align: center;
            padding: 10px;
            border-radius: 10px;
        }

        @keyframes bgmove {
            to { background-position: 200% 0; }
        }

        @keyframes discoGlow {
            0% { text-shadow: 0 0 20px #42A5F5; }
            33% { text-shadow: 0 0 20px #AB47BC; }
            66% { text-shadow: 0 0 20px #26A69A; }
            100% { text-shadow: 0 0 20px #42A5F5; }
        }

        @keyframes blink {
            0% { opacity: 1; }
            100% { opacity: 0.8; }
        }

        #navratri-img {
            width: 80vw;
            max-width: 400px;
            max-height: 50vh;
            border-radius: 20px;
            border: 3px solid #26A69A;
            box-shadow: 0 0 20px rgba(38, 166, 154, 0.7), 0 0 30px #AB47BC;
            animation: pulse 2s infinite, shadowGradient 5s infinite;
            margin: 15px 0;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shadowGradient {
            0% { box-shadow: 0 0 20px #AB47BC, 0 0 30px #26A69A; }
            33% { box-shadow: 0 0 20px #26A69A, 0 0 30px #42A5F5; }
            66% { box-shadow: 0 0 20px #42A5F5, 0 0 30px #AB47BC; }
            100% { box-shadow: 0 0 20px #AB47BC, 0 0 30px #26A69A; }
        }

        .content-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            width: 90%;
            max-width: 500px;
            padding: 25px;
            background: rgba(224, 247, 250, 0.95);
            border-radius: 20px;
            box-shadow: 0 0 20px #26A69A, 0 0 30px #AB47BC;
            animation: containerGlow 3s infinite alternate;
            border: 2px solid #42A5F5;
        }

        @keyframes containerGlow {
            0% { box-shadow: 0 0 20px #26A69A, 0 0 30px #AB47BC; }
            100% { box-shadow: 0 0 30px #26A69A, 0 0 40px #AB47BC; }
        }

        #greeting {
            font-size: 1.8em;
            text-align: center;
            margin: 10px 0;
            padding: 15px;
            background: linear-gradient(to right, #E0F7FA, #F5F5F5);
            border-radius: 15px;
            box-shadow: 0 0 15px #26A69A, 0 0 25px #AB47BC;
            color: #263238;
            font-family: 'Georgia', serif;
            position: relative;
            z-index: 1;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }

        #name-span {
            display: inline-block;
            font-size: 1.2em;
            font-weight: normal;
            background: #E0F7FA;
            padding: 1px 5px;
            border-radius: 3px;
            box-shadow: 0 0 5px #26A69A, 0 0 10px #AB47BC;
            animation: colorNeon 3s infinite, gentleZoom 2s infinite alternate;
        }

        @keyframes colorNeon {
            0% { color: #AB47BC; text-shadow: 0 0 15px #AB47BC; }
            50% { color: #26A69A; text-shadow: 0 0 15px #26A69A; }
            100% { color: #42A5F5; text-shadow: 0 0 15px #42A5F5; }
        }

        @keyframes gentleZoom {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        input, textarea {
            width: 100%;
            max-width: 300px;
            margin: 5px 0;
            padding: 12px;
            background: #E0F7FA;
            border: 2px solid #26A69A;
            color: #263238;
            border-radius: 10px;
            box-shadow: 0 0 15px #AB47BC;
            font-family: 'Georgia', serif;
            text-align: center;
            transition: box-shadow 0.3s;
            box-sizing: border-box;
        }

        input:focus, textarea:focus {
            box-shadow: 0 0 20px #26A69A, 0 0 30px #AB47BC;
            outline: none;
        }

        textarea {
            height: 70px;
        }

        .gift-button {
            margin: 10px 0;
            padding: 12px 25px;
            background: linear-gradient(45deg, #26A69A, #AB47BC);
            color: #ECEFF1;
            text-decoration: none;
            border-radius: 15px;
            box-shadow: 0 0 15px #AB47BC, 0 0 25px #26A69A;
            animation: bounce 2s infinite, glowPulse 2s infinite;
            font-size: 1.3em;
            font-family: 'Georgia', serif;
            display: inline-block;
            text-align: center;
            position: relative;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        .gift-button::before {
            content: "üéÅ";
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            opacity: 0.8;
            animation: float 3s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        #share-wa {
            margin: 10px 0;
            padding: 12px 25px;
            background: linear-gradient(45deg, #42A5F5, #AB47BC);
            color: #ECEFF1;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.3em;
            box-shadow: 0 0 15px #42A5F5, 0 0 25px #AB47BC;
            transition: box-shadow 0.3s;
            font-family: 'Georgia', serif;
            position: relative;
            overflow: hidden;
            width: 100%;
            box-sizing: border-box;
        }

        #share-wa::before {
            content: "üì±";
            position: absolute;
            top: 50%;
            left: 10px;
            transform: translateY(-50%);
            opacity: 0.8;
            animation: float 3s infinite;
        }

        #share-wa:hover {
            box-shadow: 0 0 25px #42A5F5, 0 0 35px #AB47BC;
        }

        #canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 3;
        }

        .particle {
            position: fixed;
            pointer-events: none;
            z-index: 4;
            font-size: 1.5em;
            animation: fall 10s linear forwards, rotate 5s linear infinite;
        }

        @keyframes fall {
            to { top: 105vh; }
        }

        @keyframes rotate {
            to { transform: rotate(360deg); }
        }

        @keyframes sway {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(var(--sway)); }
        }

        @keyframes flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            #happy-navratri { font-size: 2em; margin: 15px 0; }
            #greeting { font-size: 1.5em; margin: 10px 0; }
            #navratri-img { width: 90vw; max-height: 40vh; margin: 10px 0; }
            #landing h1 { font-size: 2em; }
            input, textarea, .gift-button, #share-wa { margin: 8px 0; padding: 10px; font-size: 1.1em; }
            #name-span { font-size: 1em; padding: 1px 4px; }
            .content-container { padding: 15px; }
        }
    </style>
</head>
<body>
    <div id="landing">
        <h1>Divine Navratri Blessings Await You <i class="fas fa-praying-hands"></i></h1>
        <button id="reveal">Tap to Receive Blessings</button>
    </div>
    <div id="main">
        <h2 id="happy-navratri">Jai Mata Di <i class="fas fa-prayer"></i></h2>
        <img src="Navratri.gif" alt="Navratri" id="navratri-img">
        <div class="content-container">
            <p id="greeting"></p>
            <input type="text" id="name-input" placeholder="Type your Name">
            <textarea id="msg-input" placeholder="Type your Message"></textarea>
            <!-- üî•üî• PASTE YOUR AMAZON AFFILIATE LINK BELOW üî•üî• -->
            <a href="https://amzn.to/3KgAfuZ" target="_blank" class="gift-button">Divine Navratri Gifts</a>
            <button id="share-wa">Share on WhatsApp</button>
        </div>
    </div>
    <audio id="music" loop src="Navratri.mp3"></audio>
    <canvas id="canvas"></canvas>

    <script>
        // Parse URL params
        const params = new URLSearchParams(window.location.search);
        const defaultName = "Someone";
        const defaultMsg = "aapko Navratri ki shubh kamnayein";
        let name = params.get('name') || defaultName;
        let msg = params.get('msg') || defaultMsg;

        // Elements
        const landing = document.getElementById('landing');
        const main = document.getElementById('main');
        const music = document.getElementById('music');
        const reveal = document.getElementById('reveal');
        const greeting = document.getElementById('greeting');
        const nameInput = document.getElementById('name-input');
        const msgInput = document.getElementById('msg-input');
        const shareWa = document.getElementById('share-wa');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Prefill inputs with URL params or defaults, but keep placeholders
        nameInput.value = name;
        msgInput.value = msg;

        // Update greeting
        function updateGreeting() {
            name = nameInput.value || defaultName;
            msg = msgInput.value || defaultMsg;
            greeting.innerHTML = `<span id="name-span">${name}</span> ki taraf se: ${msg}`;
        }
        updateGreeting(); // Display default greeting on load

        // Input listeners
        nameInput.oninput = updateGreeting;
        msgInput.oninput = updateGreeting;

        // Reveal button
        reveal.onclick = () => {
            landing.style.opacity = 0;
            setTimeout(() => {
                landing.style.display = 'none';
                main.style.display = 'flex';
                main.style.opacity = 1;
                document.body.style.overflow = 'auto'; // Enable scrolling
                music.play().catch(() => {}); // Handle autoplay policy
                startAnimations();
            }, 1000);
        };

        // WhatsApp share with name and msg parameters
        shareWa.onclick = () => {
            const baseUrl = window.location.origin + window.location.pathname;
            name = nameInput.value || defaultName;
            msg = msgInput.value || defaultMsg;
            const shareUrl = `${baseUrl}?name=${encodeURIComponent(name)}&msg=${encodeURIComponent(msg)}`;
            const shareText = `${name} ki taraf se: ${msg} `;
            window.open(`https://wa.me/?text=${encodeURIComponent(shareText + shareUrl)}`, '_blank');
        };

        // Animations
        let audioCtx, analyser, source, dataArray;
        let particles = [];
        const flowerEmojis = ['üå∫', 'üíê', 'ü•Ä', 'üåπ', 'üå∏', 'üåº', 'üåª', 'ü™î', 'üôè'];
        const balloonEmoji = 'ü™î';
        let lastBurst = 0;

        function startAnimations() {
            // Audio setup
            audioCtx = new AudioContext();
            source = audioCtx.createMediaElementSource(music);
            analyser = audioCtx.createAnalyser();
            analyser.fftSize = 256;
            dataArray = new Uint8Array(analyser.frequencyBinCount);
            source.connect(analyser);
            analyser.connect(audioCtx.destination);

            // Start loops
            setInterval(createFlower, 2500); // Reduced density
            setInterval(createBalloon, 4000);
            requestAnimationFrame(animateParticles);
        }

        function createParticle(x, y, vx, vy, color, size, life, type) {
            particles.push({x, y, vx, vy, color, size, life, age: 0, type});
        }

        function createBurst() {
            const now = Date.now();
            if (now - lastBurst < 1000) return;
            lastBurst = now;
            const x = Math.random() * canvas.width;
            const y = Math.random() * canvas.height;
            // Confetti
            for (let i = 0; i < 15; i++) {
                createParticle(x, y, (Math.random() - 0.5) * 8, (Math.random() - 0.5) * 8, `hsl(${Math.random()*60 + 210},70%,60%)`, Math.random()*4+2, Math.random()*80+40, 'confetti');
            }
            // Sparkles
            for (let i = 0; i < 8; i++) {
                createParticle(x, y, (Math.random() - 0.5) * 4, (Math.random() - 0.5) * 4, '#26A69A', Math.random()*2+1, 40, 'sparkle');
            }
            // Fireworks
            for (let i = 0; i < 20; i++) {
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 4 + 2;
                createParticle(x, y, Math.cos(angle) * speed, Math.sin(angle) * speed, `hsl(${Math.random()*60 + 210},70%,60%)`, 2, 80, 'firework');
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Audio analysis
            analyser.getByteFrequencyData(dataArray);
            let bass = 0;
            for (let i = 0; i < 10; i++) bass += dataArray[i];
            bass /= 10;
            if (bass > 100) createBurst();

            // Update and draw particles
            particles = particles.filter(p => p.age < p.life);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                p.vy += 0.05;
                p.age++;
                const alpha = 1 - p.age / p.life;

                ctx.beginPath();
                if (p.type === 'confetti') {
                    ctx.fillStyle = p.color;
                    ctx.save();
                    ctx.translate(p.x, p.y);
                    ctx.rotate(p.age * 0.1);
                    ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                    ctx.restore();
                } else if (p.type === 'sparkle') {
                    ctx.fillStyle = `rgba(38,166,154,${alpha})`;
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fill();
                } else if (p.type === 'firework') {
                    ctx.fillStyle = `rgba(255,255,255,${alpha})`;
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
                    ctx.fill();
                }
            });

            requestAnimationFrame(animateParticles);
        }

        function createFlower() {
            const div = document.createElement('div');
            div.className = 'particle';
            div.textContent = flowerEmojis[Math.floor(Math.random() * flowerEmojis.length)];
            div.style.left = `${Math.random() * 100}vw`;
            div.style.top = '-5vh';
            div.style.fontSize = `${Math.random() * 1 + 1}em`;
            div.style.animation += `, sway ${Math.random()*2 + 2}s ease-in-out infinite`;
            div.style.setProperty('--sway', `${(Math.random() - 0.5) * 50}px`);
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 11000);
        }

        function createBalloon() {
            const div = document.createElement('div');
            div.className = 'particle';
            div.textContent = balloonEmoji;
            div.style.left = `${Math.random() * 100}vw`;
            div.style.top = '-5vh';
            div.style.fontSize = `${Math.random() * 2 + 1.5}em`;
            div.style.filter = `hue-rotate(${Math.random() * 60 + 210}deg)`;
            div.style.textShadow = `0 0 15px hsl(${Math.random()*60 + 210},70%,60%)`;
            div.style.animation = `fall ${Math.random()*5 + 10}s linear forwards, flicker ${Math.random()+1}s infinite alternate`;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 16000);
        }

        // Resize canvas
        window.onresize = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
    </script>
</body>
</html>